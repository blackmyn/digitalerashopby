!function(o){var a=o("form.variations_form");o(document).on("click","[data-popup-open]",function(t){if(a.find("button[type=submit]").is(".disabled"))return alert(yith_wcbpg_frontend.select_variation),void t.preventDefault();var e={product_id:jQuery(this).attr("data-id"),variation_id:a.find(".variation_id").val(),action:"yith_wcbpg_set_content_modal",context:"frontend"};o.ajax({type:"POST",data:e,url:yith_wcbpg_frontend.ajaxurl,success:function(t){o("#wcbpg-popup").html(t)},complete:function(){},error:function(){}});var r=jQuery(this).attr("data-popup-open");o('[data-popup="'+r+'"]').fadeIn(350),t.preventDefault()}),o("[data-popup-close]").on("click"),o(document).on("click","[data-popup-close]",function(t){var e=jQuery(this).attr("data-popup-close");o('[data-popup="'+e+'"]').fadeOut(350),o("#wcbpg-popup").empty(),t.preventDefault()}),o(document).click(function(t){0==o(".popup-inner").length||o(t.target).closest(".popup-inner").length||o("[data-popup-close]").trigger("click")});var p=yith_wcbpg_frontend.woocommerce_price_decimal_separator,i=p.charCodeAt(0);o(document).on("keypress","#wcbpg_product_price",function(t){return r=this,(a=(e=t).which?e.which:event.keyCode)==i&&-1==o(r).val().indexOf(p)||!(a<48||57<a)?(o(r).parents(".wrap-input").removeClass("error"),o(r).parent().find(".tooltiptext").remove(),!0):(o(r).parents(".wrap-input").addClass("error"),o(r).parent().append('<span class="tooltiptext">'+yith_wcbpg_frontend.price_tooltip_error_message+"</span>"),!1);var e,r,a}),o(document).on("focusout change",'input:not([type="submit"],#wcbg_product_id)',function(){if(o(this).hasClass("required")&&(""==o(this).val()&&!o(this).is("#wcbpg_gdpr_checkbox")||o(this).is("#wcbpg_gdpr_checkbox")&&!o(this).is(":checked")))o(this).parents(".wrap-input").hasClass("error")||(o(this).parents(".wrap-input").addClass("error"),o(this).attr("placeholder",yith_wcbpg_frontend.required_field));else if(o(this).is("#wcbpg_user_email")){var t=o(this).val();1==e(t)?o(this).parents(".wrap-input").removeClass("error"):o(this).parents(".wrap-input").addClass("error")}else o(this).parents(".wrap-input").hasClass("error")&&o(this).parents(".wrap-input").removeClass("error")});var e=function(t){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)};o("form#best-price");o(document).on("submit","form#best-price",function(t){t.preventDefault();var e,r,a=o("#wcbpg-popup");if(1==(e=o(this),r=!1,e.find('input:not([type="submit"])').each(function(){o(this).parents(".wrap-input").hasClass("error")?r=!0:o(this).hasClass("required")&&(""==o(this).val()&&!o(this).is("#wcbpg_gdpr_checkbox")||o(this).is("#wcbpg_gdpr_checkbox")&&!o(this).is(":checked"))&&(o(this).parents(".wrap-input").addClass("error"),r=!0)}),r))alert(yith_wcbpg_frontend.error_fields);else{var p={formData:o(this).serialize(),action:"yith_wcbpg_insert_post",context:"frontend"};block_params={message:null,overlayCSS:{background:"#000",opacity:.6},ignoreIfBlocked:!0},a.block(block_params),o.ajax({type:"POST",data:p,url:yith_wcbpg_frontend.ajaxurl,success:function(t){a.unblock();var e='<div class="wcbpg-success-box">'+yith_wcbpg_frontend.success+'</div><a class="popup-close" data-popup-close="wcbpg-popup" href="#">x</a>',r=a.find(".popup-inner");o(r).fadeOut("slow",function(){o(r).html(e).css("padding","30px").fadeIn("slow")})},complete:function(){},error:function(){alert(yith_wcbpg_frontend.ajaxurl.error)}})}})}(jQuery);